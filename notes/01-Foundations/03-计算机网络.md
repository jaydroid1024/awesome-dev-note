# BaseDev筑基系列-计算机网络小抄



### 概述篇

- 什么是计算机网络
  - 计算机网络是指将地理位置不同的具有独立功能的多台计算机及其外部设备，通过通信线路连接起来，在网络操作系统，网络管理软件及网络通信协议的管理和协调下，实现资源共享和信息传递的计算机系统
  - 计算机网络的不是软件概念，还包含硬件设备
  - 计算机网络不仅仅是信息通信，还可以支持广泛的应用
- 计算机网络的分类

| 分类   | 英文                     | 范围           | 区域       |
| ------ | ------------------------ | -------------- | ---------- |
| 广域网 | WAN(Wide Area Network)   | 几十到几千公里 | 跨省、跨国 |
| 城域网 | MAN(Metro. Area Network) | 5KM-50KM       | 城市间     |
| 局域网 | LAN(Local Area Network)  | 1KM以内        | 地区内     |



- 计算机网络的发展历史

  - 世界互联网发展历史

    - 单个网络 ARPANET
      - 计算机-->交换机<--计算机
    -  三级结构互联网
      - 主干网-->地区网-->校园网
    - 多层次ISP互联网
      - ISP(Internet Service Provider): 网络服务提供商
      - 中国电信、中国移动、中国联通等
      - 主干ISP(海底电缆)-->地区ISP(山东移动)-->校园、家庭、公司
      - 查看全球网络地图：https://www.infrapedia.com/app

  - 中国互联网的发展历史

  	- 1980 年开始互联网实验
  	- 1989 年第一个公共网络建立运行
  	- 1994 接入国际互联网
  	- 中国的互联网企业
  	  - 中国电信互联网CHINANET
  	  - 中国联通互联网UNINET
  	  - 中国移动互联网CMNET
  	  - 中国教育与科研计算机网CERNET
  	  - 中国科学技术网CSTNET
  	  - 1996年，张朝阳创建搜狐
  	  - 1997年，丁磊创建网易
  	  - 1998年，王志东创建新浪
  	  - 1998年，马化腾、张志东创建腾讯
  	  - 1999年，马云创建阿里巴巴
  	  - 2000年，李彦宏创建百度

- 计算机网络的层次结构

  - 层次结构设计的基本原则
    - 分层实现不同的功能
      - 保证数据通路顺畅
      - 识别目的计算机
      - 目的计算机状态
      - 数据是否错误
      - 层次划分：网络应用数据(视频、文件、游戏)-->数据可靠通信(数据错误、重复)-->物理网络接入(光电等物理特性)
    - 各层之间是相互独立的
    - 每一层要有足够的灵活性
    - 各层之间完全解耦
  - OSI七层模型
    - 应用层：为计算机用户提供接口和服务
    - 表示层：数据处理（编码解码、加密解密等）
    - 会话层：管理（建立、维护、重连）通信会话
    - 传输层：管理端到端的通信连接
    - 网络层：数据路由（决定数据在网络的路径）
    - 数据链路层：管理相邻节点之间的数据通信
    - 物理层：数据通信的光电物理特性
    - OSI在市场化过程中困难重重， TCP/IP在全球范围成功运行
    - OSI欲成为全球计算机都遵循的标准
    - OSI最终并没有成为广为使用的标准模型
    - 为什么没有被接受
      - OSI标准制定周期过长，按OSI标准生产的设备无法及时进入市场
      - OSI的专家缺乏实际经验
      - OSI模型设计的并不合理，一些功能在多层中重复出现
  - TCP/IP四层模型
    - 应用层：HTTP/FTP/… ，对应OSI的应用层、表示层、会话层
    - 传输层：TCP/UDP，对应OSI的传输层
    - 网络层：IP/ICMP，对应OSI的网络层
    - 网络接口层：Ethernet/ARP/RARP，对应OSI的数据链路层、物理层
      

- 现代互联网的网络拓扑

  - 边缘部分
    - 家庭：终端机器(手机)-->路由器-->网关-->地区ISP
    - 企业：终端机器(电脑)-->路由器-->内部网关-->统一网关-->地区ISP
  - 核心部分
    - 地区ISP-->主干ISP-->国际路由器
  - 网络连接错综复杂
  - 接入设备数以亿计
  - 网络覆盖边际全球

  ![](https://tva1.sinaimg.cn/large/008eGmZEly1gnkc5mn3s9j31g40mu0zf.jpg)

  ![](https://tva1.sinaimg.cn/large/008eGmZEly1gnkc6x9oz5j31e30hjdmu.jpg)

  

  - 客户-服务器(C/S)模式
    - C请求服务-->S获得服务
  - 对等连接(P2P)模式
    - 

- 计算机网络的性能指标

  - 速率
    - 速率单位： bps=bit/s
    - 为什么电信拉的100M光纤，测试峰值速度只有12M每秒？
      -  bps到字节的转换
      - 网络常用单位为(Mbps)
      - 100M/s = 100Mbps = 100Mbit/s
      - 100Mbit/s=(100/8)MB/s=12.5MB/s
  - 时延
    - 总时延 = 发送时延 + 排队时延 + 传播时延 + 处理时延
    - 发送时延
      - 发送时延 = 数据长度(𝑏𝑖𝑡)/发送速率(𝑏𝑖𝑡/𝑠)
      - 发送速率受限于计算机网卡
    - 传输时延
      - 传播时延 = 传输路径距离/传播速率(𝑏𝑖𝑡/𝑠)
      - 传播速率受限于传输介质，铜线、光线
    - 排队时延
      - 数据包在网络设备中等待被处理的时间
    - 处理时延
      - 数据包到达设备或者目的机器被处理所需要的时间
  - 往返时间RTT
    - RTT表示的是数据报文在端到端通信中的来回一次的时间
    - RTT(Route-Trip Time)是评估网络质量的一项重要指标
    - 通常使用ping命令查看RTT



### 物理层概述

- 物理层的作用

  - 相关设备
    - 双绞线
    - 同轴电缆
    - 光纤
    - 红外线
    - 无线
    - 激光
  - 传输比特流
  - 连接不同的物理设备
  - 物理特性
    - 机械特性
    - 电气特性
    - 功能特性
    - 过程特性
- 信道的基本概念
  - 一条通信电路包含一个接收信道和一个发送信道
  - 信道是往一个方向传送信息的媒体
  - 单工信道
    - 有线电视、无线电收音机等等
    - 只能一个方向通信，没有反方向反馈的信道
  - 半双工信道
    - 不能双方同时发送，也不能同时接收
    - 双方都可以发送和接收信息
  - 全双工信道
    - 双方都可以同时发送和接收信息
- 分用-复用技术
  - 信道利用率并不高？
  - 分用器
  - 复用器
  - 频分复用
  - 时分复用
  - 波分复用
  - 码分复用

### 数据链路层概述

- 主要功能

  - 封装成帧

    - 发送端在网络层的一段数据前后添加特定标记形成“帧”
    - “帧”是数据链路层数据的基本单位
    - 接收端根据前后特定标记识别出“帧”
    - 物理层才不管你“帧”不“帧”，物理层之作用bit流的传输
    - IP数据报-->“帧”的数据[帧首部， “帧”的数据 ，帧尾部]
    -  帧首部和尾部是特定的控制字符（特定比特流）SOH: 00000001，EOT: 00000100
  - 透明传输
    - “一种实际存在的事物却又看起来不存在一样”
    - “透明”在计算机领域是非常重要的一个术语
    - “即是控制字符在帧数据中，但是要当做不存在的去处理”
    - 数据中也出现了控制字符，对数据中的控制字符进行特殊处理，转义
    - “\n”、“\t”等控制字符，编程语言中“\”一般为转义字符，“\\” 、“\\\\”
  - 差错监测
    - 数据链路层负责起“差错监测”的工作
    - 物理层只管传输比特流，无法控制是否出错
    - 循环冗余校验码CRC
      - 检测数据传输或者保存后可能出现的错误
      - 一种根据传输或保存的数据而产生固定位数校验码的方法
      - 生成的数字计算出来并且附加到数据后面
      - 模“2”除法
        - 与算术除法类似，但除法不借位，实际是“异或”操作
        - 模“2”除法是二进制下的除法
        - 0 xor 0 = 0，0 xor 1 = 1，1 xor 0 = 1，1 xor 1 = 0
      - 检测流程
        - 选定一个用于校验的多项式G(x)，并在数据尾部添加r个0
        - 将添加r个0后的数据，使用模“2”除法除以多项式的位串
        - 得到的余数填充在原数据r个0的位置得到可校验的位串
        - 例子1：使用CRC计算101001的可校验位串
          - 计算过程有点难！！！
      - 数据链路层只进行数据的检测，不进行纠正，一旦出错会丢弃
      - CRC的错误检测能力与位串的阶数r有关
    - 奇偶校验码
      - 检测机制：在比特流最后一位加上一位（1或者0），（所有比特流中的1相加）偶数加0，奇数加1 
      - 缺陷：出错两位，奇偶校验码校测不到错误

- 最大传输单元MTU

  - MTU
    - 数据链路层的数据帧也不是无限大的
    - 最大传输单元MTU(Maximum Transmission Unit)
    - 数据帧过大或过小都会影响传输的效率
    - 总时延 = 发送时延 + 排队时延 + 传播时延 + 处理时延
    - 以太网MTU一般为1500字节
  - 路径MTU
    - 路径MTU由链路中MTU的最小值决定
    - 木桶效应

- 以太网协议详解

  - MAC地址

    - MAC地址（Media Access Control Address）直译为媒体存取控制位址，也称为局域网地址（LAN Address）
    - 每一个设备都拥有唯一的MAC地址
    - MAC地址（物理地址、硬件地址）
    - MAC地址共48位，使用十六进制表示
    - ipconfig/all 查看本机所有MAC地址 ，30-B4-9E-ED-85-CA

  - 以太网协议

    - 以太网是一种应用于数据链路层的协议
    - 以太网(Ethernet)是一种使用广泛的局域网技术
    - 使用以太网可以完成相邻设备的数据帧传输
    - 以太网数据格式
      - 类型：0800： IP数据报，0806： ARP请求/应答，8035： RARP请求/应答

    | 目的地址（MAC地址) 单位字节 | 源地址 | 类型 | 帧数据  | CRC校验码 |
    | --------------------------- | ------ | ---- | ------- | --------- |
    | 6                           | 6      | 2    | 46-1500 | 4         |

    - MAC地址表，路由器持有

    | MAC地址           | 硬件接口 |
    | ----------------- | -------- |
    | 31-B4-9E-ED-85-CA | 接口1    |
    | 32-B4-9E-ED-85-CB | 接口2    |
    | 33-B4-9E-ED-85-CC | 接口4    |

    - A终端通过路由器发送数据到C终端的过程
      - A通过网卡发出数据帧
      - 数据帧到达路由器，路由器取出前6字节（目的MAC地址）
      - 路由器匹配MAC地址表，找到对应的网络接口
      - 路由器往该网络接口发送数据帧
      - 如果MAC地址表没有匹配成功
      - 路由器将广播A的数据包到除A以外的端口
      - 路由器检查MAC地址表，发现没有C的信息
      - 路由器将收到来自B、 C的回应，并将地址记录
    - 以太网协议只提供相邻物理节点传输，跨设备是无法传输的，需要借助网络层

### 网络层篇

- 网络层的主要功能

  - 网络层：数据路由（决定数据在网络的路径）
  - 数据链路层只能解决相邻物理节点传输

- 路由器

- IP协议详解

  - 虚拟互联网络

    - 物理设备通过使用IP协议，屏蔽了物理网络之间的差异
    - 实际的计算机网络是错综复杂的
    - 当网络中的主机使用IP协议连接时，则无需关注网络细节
    - IP协议使得网络层可以屏蔽底层细节而专注网络层的数据转发
    - IP协议使得复杂的实际网络变为一个虚拟互连的网络
    - IP协议解决了在虚拟网络中数据报传输路径的问题

  - IP协议

    - IP地址
      - MAC地址： 30-B4-9E-ED-85-CA：00110000-11000020-11101101-01000101-11001010
        - 48位，16进制表示
        - 唯一，不可变
      - P地址： 192.168.11.11：11000000.10101000.00001011.00001011
        - 32位，常分成4个8位，一般采用点分十进制表示，共可以表示 2^32 = 4294961296
        - IP地址常使用**点分十进制**来表示(0~255.0~255.0~255.0~255)，例如：255.255.255.255
        - 受网络环境影响会发生改变
    - IP报文格式

    | 协议层     | 数据格式                                                     |
    | ---------- | ------------------------------------------------------------ |
    | 物理层     | 001010101001110110101010101010…10101010101010101010101010101 |
    | 数据链路层 | 【帧首部 】【“帧”的数据】 【帧尾部】                         |
    | 网络层     | 【IP首部】【 IP数据报的数据】                                |

    - IP报文头部各个参数的作用

    | 4位版本             | 4位首部长度 | 8位服务类型(TOS) | 16位总长度(字节) |
    | ------------------- | ----------- | ---------------- | ---------------- |
    | 16位标识            | 3位标志     | 13位片偏移       |                  |
    | 8位生存时间(TTL)    | 8位协议     | 16位首部校验和   |                  |
    | 32位源IP地址        |             |                  |                  |
    | 32位目的IP地址      |             |                  |                  |
    | 选项options（若有） |             |                  |                  |
    | IP数据              |             |                  |                  |

    - 每一行32位，第六行可选，所以IP报文头部至少占4×5=20个字节
    - 第一行
      - 版本：占4位，指的是IP协议的版本，通信双方的版本必须一致，当前主流版本是4，即IPv4，也有IPv6
      - 首部位长度：占4位，最大数值为15，表示的是IP首部长度，单位是“32位字”（4个字节），也即是IP首部最大长度为60字节
      - 8位服务类型(TOS)：TOS包括共8位，包括3 bit的优先权字段（取值可以从000-111所有值），4 bit的TOS子字段和1 bit未用位但必须置0。
      - 总长度：占16位，最大数值为65535，表示的是IP数据报总长度（IP首部+IP数据），数据链路层MTU,如果IP数据报的数据多余“帧”的数据，需要分片处理
    - 第二行
      - 16位标识：IP协议内部使用
      - 3位标志：标记是否可以分片
      - 13位片偏移：第几个分片
    - 第三行
      - TTL：占8位，表明IP数据报文在网络中的寿命，每经过一个设备， TTL减1，当TTL=0时，网络设备必须丢弃该报文，避免数据在网络无限传输
      - 协议：占8位，表明IP数据所携带的具体数据是什么协议的（如： TCP、 UDP等）
        - 协议名 ICMP、 IGMP、 IP 、TCP、 UDP、 OSPF …，字段值 1 、2 、4 、6、 17、 89 …
      - 首部校验和：占16位，校验IP首部是否有出错
    - 源IP地址：发送方
    - 目的IP地址：接收方

- IP协议的转发流程

  - 逐跳(hop-by-hop)

  - 路由表

    - 计算机或者路由器都拥有路由表
    - MAC地址表和路由表

    | MAC地址 | 硬件接口 |      | 目的IP地址 | 下一跳IP地址 |
    | ------- | -------- | ---- | ---------- | ------------ |
    | A       | E1       |      | IP1        | IP4          |
    | B       | E2       |      | IP2        | IP5          |
    | C       | E3       |      | IP3        | IP6          |

  - 转发流程：网络层

    ![](https://tva1.sinaimg.cn/large/008eGmZEly1gnl5pjkrqtj30nm07gjsc.jpg)

    - A将数据报发送给E
    - A发出目的地为C的IP数据报， 查询路由表发现下一跳为E
    - E查询路由表发现下一跳为F，将数据报发送给F
    - F查询路由表发现目的地C直接连接，将数据报发送给C

  - IP数据报每一跳的IP地址始终不变

  - 数据帧每一跳的MAC地址都在变化

- ARP协议与RARP协议

  - ARP协议
    - ARP(Address Resolution Protocol)地址解析协议，通过IP地址查找MAC地址
    - ARP缓存表：[IP地址, MAC地址] 如：192.168.83.254 ---00-50-56-e0-33-40
    - ARP缓存表缓存了IP地址到硬件地址之间的映射关系
    - ARP缓存表是ARP协议和RARP协议运行的关键
    - ARP缓存表中的记录并不是永久有效的，有一定的期限
    - **arp -a** :查看ARP缓存表
    - 数据报格式，共28个字节，封装在数据链路层里，用于网络层，【类型0806 ，ARP请求/应答 ，PAD】
      - 硬件类型，2位
      - 协议类型 ，2位
      - 标记 ，24
      - 发送端 以太网地址 ，6位
      - 发送端 IP地址 ，4位
      - 目的端 以太网地址 ，6位
      - 目的端 IP地址，4位
  - RARP协议
    - RARP(Reverse Address Resolution Protocol)逆地址解析协议
    - 数据链路层MAC48位地址--》网络层IP32位地址
  - ARP和RARP的操作对程序员是透明的
  - (R)ARP协议是TCP/IP协议栈里面基础的协议
  - 理解(R)ARP协议有助于理解网络分层的细节
  - 转发流程：网络层+数据链路层+物理层
    - 第一步：A->E
      - A发出目的地为C的IP数据报， 查询路由表发现下一跳为E
      - A将IP数据报交给数据链路层，并告知目的MAC地址是E
      - 数据链路层填充源MAC地址A和目的MAC地址E
      - 数据链路层通过物理层将数据发送给E
    - 第二步：E-->F
      - E的数据链路层接收到数据帧， 把帧数据交给网络层
      - E查询路由表， 发现下一跳为F
      - E把数据报交给数据链路层， 并告知目的MAC地址为F
      - E的数据链路层封装数据帧并发送
    - 第三步：F-->C
      - F的数据链路层接收到数据帧， 把帧数据交给网络层
      - F查询路由表， 发现下一跳为C
      - F把数据报交给数据链路层，并告知目的MAC地址为C
      - F的数据链路层封装数据帧并发送

- IP地址的子网划分

  - IP地址长度为32位，常分成4个8位，常使用点分十进制来表示(0~255.0~255.0~255.0~255)，2^32 = 4294961296

  - 直接对42亿多个IP地址规划和分配IP地址非常麻烦

  - IP地址=【网络号段+主机号段】=【网络号段+ (子网号段+子网主机号段)】=

  - 分类的IP地址

    - 网络号 
      - 网络号的位数直接决定了可以分配的网络数（计算方法=2^网络号位数-特殊网络号数）
    - 主机号
      - 主机号的位数则决定了网络中最大的主机数（计算方法=2^主机号位数-特殊主机号数）

    | IP类型 | 组成                            | 最小网络号           | 最大网络号                | 子网数量(理想)        | 最小主机号 | 最大主机号  | 主机数量        |
    | ------ | ------------------------------- | -------------------- | ------------------------- | --------------------- | ---------- | ----------- | --------------- |
    | A      | 8位网络号(0开头）+24位主机号    | 0(00000000)          | 127(01111111)             | 2^7=128               | 0.0.0      | 255.255.255 | 2^24=16,777,216 |
    | B      | 16位网络号（10开头）+16位主机号 | 128(100000000).0     | 191(10111111).255         | 2^14(6+8)=16,384      | 0.0        | 255.255     | 2^16=65536      |
    | C      | 24位网络号（110开头）+8位主机号 | 192(110000000).0.0   | 223(11011111).255.255     | 2^21(5+8+8)=2,097,252 | 0          | 255         | 2^8=256         |
    | D      | 组播地址（1110开头）            | 224(111000000).0.0.0 | 239(11101111).255.255.255 | 2^4=16                |            |             |                 |
    | E      | 保留以后再用（1111开头）        | 240(111110000).0.0.0 | 225(11111111).255.255.255 | 2^4=16                |            |             |                 |

    - 特殊的网络号
      - A类地址网络段后7位全1(01111111:127)表示回环地址
      - A类地址网络段全0(00000000)表示特殊网络
      - B类地址网络段(10000000.00000000:128.0)是不可使用的
      - C类地址网络段(192.0.0)是不可使用的
      - 上表中的A类IP的子网可用数量为：2^7-2，B类:2^14-1，C类：2^21-1
    - 特殊的主机号
      - 主机号为全1表示广播地址，向当前网络段所有主机发消息，例如：1.0.0.0
      - 主机号全0表示当前网络段，不可分配为特定主机，例如：1.255.255.255
      - 上表中A\B\C的可用主机号数量为：2^24-2、2^16-2、2^8-2
    - 127.0.0.1，通常被称为本地回环地址(Loopback Address)，不属于任何一个有类别地址类。localhost是个域名
    - 如何判断一个IP属于哪一类IP地址
      - 取出首八位：
      - A类：(0,127) / 0xxxxxxx，
      - B类：[128,19]) / 10xxxxxx，
      - C类：[192,223] / 110xxxxx

  - 划分子网

    - 某公司拥有100名员工，每人配备一个计算机，请问该公司应该申请哪种网络段？
      - C类可分配的主机数量为2^8-2=254个
    - 某公司拥有256名员工，每人配备一个计算机，请问该公司应该申请哪种网络段？
      - B类可分配的主机数量为2^16-2=65534个
      - 造成了很大的地址空间浪费
    - 子网号
      - IP地址=【网络号段+主机号段】=【网络号段+ (子网号段+子网主机号段)】=
      - 例如一个C类IP 193.10.10.0 = 24位网络号（110开头）+8位主机号 
      - 主机号段为.0=.00000000
      - 将主机号段最高位分成 **.0**0000000 和  **.1**0000000 两个子网
      -  **.0**0000000 子网可以表示的主机范围为：(0) **.0**0000000 -- (127) **.0**1111111 
      -  **.1**0000000 子网可以表示的主机范围为：(128) **.1**0000000 -- (255) **.1**1111111 
      - 某公司拥有100名员工，每人配备一个计算机，就可以申请C类IP的子网从而可以充分利用IP的数量
    - 子网掩码
      - 子网号这么多，有没有办法快速判断某个IP的网络子网掩码号？
      - 子网掩码由连续的1和连续的0组成
      - 子网掩码和IP地址一样，都是32位
      - 某一个子网的子网掩码具备网络号位数个连续的1
      - A类IP的子网掩码：255.0.0.0 
      - B类IP的子网掩码：255.255.0.0 
      - C类IP的子网掩码：255.255.255.0
      - 划分子网的子网掩码：子网掩码-子网号-主机号
        - 例如：193.10.10.0 = 24位网络号（110开头）+1位子网号+7位主机号 
          - 子网掩码为：255.255.255.128（24+1个1和7个0组成）
          - 求 193.10.10.6 这个IP对应的子网号
          - 第一步IP对应的二进制：            193.10.10.6 -- 11000001.00001010.00001010.00000110
          - 第二步子网掩码对应的二进制：255.255.255.128 -- 11111111.11111111.11111111.10000000
          - 第三步：一二步与运算得到子网号 11000001.00001010.00001010.00000000  -- 193.10.10.0

  - 无分类地址CIDR

    - IP地址=【网络号段+主机号段】=【网络号段+ (子网号段+子网主机号段)】

    - 子网划分相对复杂所以出现了CIDR

    - 无类域内路由选择（Classless Inter-Domain Routing）

    - CIDR中没有A、 B、 C类网络号、和子网划分的概念

    - CIDR将网络前缀相同的IP地址称为一个“CIDR地址块”

    - IP地址=【网络前缀+主机号】

    - 网络前缀是任意位数的

    - CIDR采用斜线记法来表示一个IP地址

      - 193.10.10.129/25==11000001.00001010.00001010.10000001
      - 25表示网络前缀有25位，主机位有7位
      - 相比原来子网划分更加灵活
      - 超网-》子网

      | CIDR前缀长度 | 掩码点分十进制 | 地址数    |
      | ------------ | -------------- | --------- |
      | /13          | 255.248.0.0    | 2^19=512K |
      | /14          | 255.252.0.0    | 2^18=256K |
      | /15          | 255.254.0.0    | 2^17=128K |
      | /16          | 255.255.0.0    | 2^16=64K  |
      | /17          | 255.255.128.0  | 2^15=32K  |
      | /18          | 255.255.192.0  | 2^14=16K  |
      | /19          | 255.255.224.0  | 2^13=8K   |

      

- 网络地址转换NAT技术

  -  IPv4最多只有40+亿个IP地址

  - 早期IP地址的不合理规划导致IP号浪费

  - 网络拓扑：边缘部分：家庭，多个设备如何复用同一个IP地址的

  - 内网地址

    - 内部机构使用
    - 避免与外网地址重复
    - 三类内网地址
      - 10.0.0.0~10.255.255.255（支持千万数量级设备）
      - 172.16.0.0~172.31.255.255（支持百万数量级设备）
      - 192.168.0.0~192.168.255.255（支持万数量级设备）

  - 外网地址

    - 全球范围使用
    - 全球公网唯一

  - 网络地址转换NAT技术

    - 内网多个设备使用同一个外网IP请求外网的服务，外部怎么知道具体是哪个设备在请求的？
    - 网络地址转换NAT(Network Address Translation)
    - NAT技术用于多个主机通过一个公有IP访问互联网的私有网络中
    - NAT减缓了IP地址的消耗，但是增加了网络通信的复杂度
    - 端口(Port)号
    - 端口映射表：NA(P)T表

    | 数据传输方向 | 旧的地址和端口号   | 新的地址与端口号   |
    | ------------ | ------------------ | ------------------ |
    | 出           | 92.168.2.11:6666   | 173.21.59.10:16666 |
    | 出           | 192.168.2.10:7777  | 173.21.59.10:17777 |
    | 入           | 173.21.59.10:16666 | 192.168.2.11:6666  |
    | 入           | 173.21.59.10:17777 | 192.168.2.10:7777  |

    

- ICMP协议详解

  - 网际控制报文协议（Internet Control Message Protocol）

  - ICMP协议可以报告错误信息或者异常情况，辅助IP协议

  - 网络层  【IP首部】-【 IP数据报的数据】

  - 【IP首部】协议：占8位，表明IP数据所携带的具体数据是什么协议的（如： TCP、 UDP、ICMP等）

  - ICMP数据封装在【 IP数据报的数据】里面

  - 【ICMP报文首部】-【 ICMP报文数据】

  - 8位类型+ 8位代码 +16位校验和+ICMP报文数据

  - 分类

    - 差错报告报文 
    - 询问报文

    | ICMP报文种类 | 类型的值        | 报文类型                    | 具体代码 |
    | ------------ | --------------- | --------------------------- | -------- |
    | 差错报告报文 | 3 (终点不可达） | 网络不可达 / 主机不可达     | 0/1      |
    |              | 5 (重定向）     | 对网络重定向 / 对主机重定向 | 0/1      |
    |              | 11              | 传输超时                    | -        |
    |              | 12              | 坏的IP头 / 缺少其他必要参数 | 0/1      |
    | 询问报文     | 0或8            | 回送(Echo)请求或应答        | -        |
    |              | 13或14          | 时间戳(Timestamp)请求或应答 | -        |

  - ICMP报文的应用

    - Ping应用
      - 询问报文-0或8 - 回送(Echo)请求或应答
      - Ping回环地址127.0.0.1,如果失败计算机的协议栈可能出问题，需要重装操作系统
      - Ping网关地址，如果失败，网关路由器可能出问题
      - Ping远端地址，如果失败，家到ISP服务商之间可能出问题了，需要找服务商解决
    - Traceroute应用
      - Traceroute可以探测IP数据报在网络中走过的路径
      - 【IP首部】TTL：占8位，表明IP数据报文在网络中的寿命，每经过一个设备， TTL减1，当TTL=0时，网络设备必须丢弃该报文--ICMP终点不可达差错报文
      - 命令：tracert github.com 

- 网络层的路由概述

  - 路由表更新问题
  - 路由算法
  - 自治系统(AS)

- 内部网关路由协议之RIP协议

  - 距离矢量(DV)算法
  - RIP协议的过程
  - RIP协议的弊端

- Dijkstra算法

  - 最短路径问题

- 内部网关路由协议之OSPF协议

  - 链路状态(LS)协议
  - OSPF协议的过程

- 外部网关路由协议之BGP协议

  - 政策
  - 安全

### 传输层篇

- 传输层的主要功能

	- 进程与进程的通信
	- 端口的概念

- UDP协议详解

	- 功能
	- 特点
	- 报文结构

- TCP报文详解

	- 功能
	- 特点
	- 报文结构

- 可靠传输的基本原理

	- 停止等待协议
	- 连续ARQ协议
	- 超时重传计时器

- TCP协议的可靠传输

	- 滑动窗口
	- 累计确认
	- 选择重传

- TCP协议的流量控制

	- 窗口
	- 坚持定时器

- TCP协议的拥塞控制

	- 慢启动算法
	- 拥塞避免算法

- TCP连接的建立

	- 三次握手

- TCP连接的释放

	- 四次释放

		- 2MSL
		- 等待计时器

- 套接字与套接字编程

	- 套接字
	- 服务端编程
	- 客户端编程

### 应用层篇

- DNS服务详解

	- DNS的功能
	- 域名详解
	- 域名服务器

- DHCP协议详解

	- DHCP是什么
	- DHCP的功能

- HTTP协议详解

	- HTTP是什么
	- Web服务器
	- HTTP请求方法
	- HTTP指定资源
	- HTTP请求报文
	- HTTP应答报文
	- HTTP应答状态码

- HTTP工作的结构

	- Web缓存
	- Web代理
	- CDN
	- 爬虫

- HTTPS协议详解

	- 加密模型
	- 数字证书
	- SSL握手过程

### 计算机网络实践

- 网络嗅探工具

  - IP报文解析
  - TCP报文解析
  - UDP报文解析

- 从零到一实现HTTP服务器开发